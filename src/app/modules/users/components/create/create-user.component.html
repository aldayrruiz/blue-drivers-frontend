<div class='main-div'>
  <mat-card class='form-width'>
    <mat-card-header>
      <mat-card-title> Nuevo usuario</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form [formGroup]='formGroup'>
        <table cellspacing='0'>
          <!-- Email -->

          <mat-form-field class='w-100' appearance='fill'>
            <mat-label>Email</mat-label>
            <div>
              <input
                type='email'
                matInput
                [formControl]='email'
                [errorStateMatcher]='matcher'
                placeholder='antonio.ruiz@example.com'
              />
            </div>
            <mat-error *ngIf="email.hasError('email') && !email.hasError('required')">
              Por favor, introduzca un email correcto
            </mat-error>
            <mat-error *ngIf="email.hasError('required')">
              Email es <strong>obligatorio</strong>
            </mat-error>
          </mat-form-field>

          <!-- Full name -->
          <mat-form-field class='w-100' appearance='fill'>
            <mat-label>Nombre y apellidos</mat-label>
            <input
              type='text'
              matInput
              [formControl]='fullname'
              placeholder='Antonio Ruiz'
              [errorStateMatcher]='matcher'
            />
            <mat-error *ngIf="fullname.hasError('required')">
              Nombre y apellidos es <strong>obligatorio</strong>
            </mat-error>
          </mat-form-field>

          <!-- Role -->
          <mat-form-field class='w-100' appearance='fill'>
            <mat-label>Rol</mat-label>
            <mat-select [formControl]='role'>
              <mat-option value='USER'>Usuario</mat-option>
              <mat-option value='ADMIN'>Administrador</mat-option>
            </mat-select>
          </mat-form-field>

          <!-- BLE User Id -->
          <mat-form-field class='w-100' appearance='fill'>
            <mat-label>Identificador BLE de usuario</mat-label>
            <input
              type='text'
              matInput
              [formControl]='bleUserId'
              [errorStateMatcher]='matcher'
            />
          </mat-form-field>

          <mat-slide-toggle formControlName='supervisor' *ngIf='tenant.diet'>Supervisor</mat-slide-toggle>

          <mat-slide-toggle formControlName='interventor' *ngIf='tenant.diet'>Interventor</mat-slide-toggle>

          <!-- Button - Create User -->
          <div class='d-flex justify-content-evenly'>
            <button
              class='cancel'
              mat-raised-button
              color='warn'
              routerLink='..'
              [disabled]='sending'
            >
              Cancelar
            </button>
            <button
              class='create'
              (click)='createUser()'
              mat-raised-button
              color='primary'
              type='submit'
              [disabled]='!formGroup.valid || sending'
            >
              Crear
            </button>
          </div>
        </table>
      </form>
    </mat-card-content>
  </mat-card>
</div>
